<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matte helper: Uppgifter</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="tools-panel.css" />
</head>

<body>
  <main class="container">
    <h1>Uppgifter</h1>
    <p>VÃ¤lj nivÃ¥, omrÃ¥de och svÃ¥rhetsgrad.</p>

    <section class="card">
      <label for="level">NivÃ¥</label>
      <select id="level">
        <option>Grundskola Ã¥k 1â€“3</option>
        <option>Grundskola Ã¥k 4â€“6</option>
        <option>Grundskola Ã¥k 7â€“9</option>
        <option>Gymnasiet Matte 1</option>
        <option>Gymnasiet Matte 2</option>
        <option>Gymnasiet Matte 3</option>
        <option>Gymnasiet Matte 4</option>
        <option>Gymnasiet Matte 5</option>
      </select>

      <label for="topic">OmrÃ¥de</label>
      <select id="topic"></select>

      <label for="difficulty">SvÃ¥rhetsgrad</label>
      <select id="difficulty">
        <option>LÃ¤tt</option>
        <option>Medel</option>
        <option>SvÃ¥r</option>
      </select>

      <button id="nextBtn" type="button">NÃ¤sta uppgift</button>
      <p id="poolInfo" style="margin-top:10px; opacity:0.85;"></p>
    </section>

    <section class="card">
      <h2>Uppgift</h2>
      <div id="question" style="font-size: 18px; line-height: 1.4;">
        VÃ¤lj filter och klicka â€œNÃ¤sta uppgiftâ€.
      </div>

      <label for="answerInput" style="margin-top:16px;">Ditt svar</label>
      <input id="answerInput" type="text" placeholder="Skriv ditt svar..." />

      <div style="display:flex; gap:10px; margin-top:12px; flex-wrap: wrap;">
        <button id="checkBtn" type="button">RÃ¤tta</button>
        <button id="hintBtn" type="button">Tips</button>
        <button id="checkAttemptBtn" type="button">Kolla mitt fÃ¶rsÃ¶k (AI verktyg)</button>
      </div>

      <p id="feedback" style="margin-top:12px;"></p>
      <pre id="aiBox" class="answer" style="margin-top:12px; white-space: pre-wrap;"></pre>
    </section>

    <p><a href="index.html" style="color:#9bb7ff;">â† Tillbaka till huvudmenyn</a></p>
  </main>

  <!-- ===== TOOLS ===== -->
  <button class="tm-tools-btn tm-left" id="tmOpenLeft" type="button" title="Verktyg">ğŸ§°</button>
  <button class="tm-tools-btn tm-right" id="tmOpenRight" type="button" title="Whiteboard">âœï¸</button>

  <aside class="tm-panel tm-left" id="tmPanelLeft" aria-hidden="true">
    <div class="tm-panel-header">
      <strong>Verktyg</strong>
      <button class="tm-close" id="tmCloseLeft" type="button">âœ•</button>
    </div>

    <div class="tm-panel-body">
      <p style="opacity:0.85; margin-top:0;">
        <button class="tm-small" id="calcOpen" type="button">Ã–ppna minirÃ¤knare</button>
      </p>

      <div class="tm-tool-card">
        <h3 style="margin:0 0 8px 0;">Tips</h3>
        <p style="margin:0; opacity:0.9;">MinirÃ¤knare/graf kommer vara hÃ¤r senare.</p>
      </div>
    </div>
  </aside>

  <aside class="tm-panel tm-right" id="tmPanelRight" aria-hidden="true">
    <div class="tm-panel-header">
      <strong>Whiteboard</strong>
      <button class="tm-close" id="tmCloseRight" type="button">âœ•</button>
    </div>

    <div class="tm-panel-body">
      <div class="tm-row">
        <label class="tm-label">Verktyg</label>
        <div class="tm-row">
          <button class="tm-tool-btn" id="tmPenBtn" type="button" title="Penna">âœï¸</button>
          <button class="tm-tool-btn" id="tmEraserBtn" type="button" title="Suddgummi">ğŸ©¹</button>
          <button class="tm-tool-btn" id="tmClearBtn" type="button" title="Rensa whiteboard">ğŸ—‘ï¸</button>
        </div>
      </div>

      <div class="tm-row">
        <label class="tm-label" for="tmSize">Storlek</label>
        <input id="tmSize" type="range" min="2" max="28" value="10" />
      </div>

      <div class="tm-row">
        <label class="tm-label" for="tmColor">FÃ¤rg</label>
        <input id="tmColor" type="color" value="#ffffff" />
      </div>

      <div class="tm-board-wrap">
        <canvas id="tmCanvas" width="900" height="900"></canvas>
      </div>

      <div class="tm-row" style="justify-content: space-between;">
        <button class="tm-small" id="tmSave" type="button">Spara Whiteboard</button>
        <span id="tmStatus" style="opacity:0.8; font-size: 13px;"></span>
      </div>
    </div>
  </aside>

  <div class="tm-backdrop" id="tmBackdrop" hidden></div>

  <!-- ===== CALCULATOR WINDOW (UTANFÃ–R PANELER) ===== -->
  <div id="calcWindow" class="calc-window" hidden>
    <div id="calcHeader" class="calc-header">
      <span>MinirÃ¤knare</span>
    </div>

    <div class="calc-body">
      <div class="calc-display-wrap">
        <input id="calcDisplay" class="calc-display" inputmode="none" autocomplete="off" spellcheck="false" />
        <div id="calcHint" class="calc-hint">Klicka pÃ¥ rÃ¤knaren fÃ¶r att aktivera tangentbord</div>
      </div>

      <div class="calc-grid">
        <button data-k="AC">AC</button>
        <button data-k="DEL">DEL</button>
        <button data-k="(">(</button>
        <button data-k=")">)</button>
        <button data-k="/">Ã·</button>

        <button data-k="sin(">sin</button>
        <button data-k="cos(">cos</button>
        <button data-k="tan(">tan</button>
        <button data-k="sqrt(">âˆš</button>
        <button data-k="^">xÊ¸</button>

        <button data-k="7">7</button>
        <button data-k="8">8</button>
        <button data-k="9">9</button>
        <button data-k="*">Ã—</button>
        <button data-k="pi">Ï€</button>

        <button data-k="4">4</button>
        <button data-k="5">5</button>
        <button data-k="6">6</button>
        <button data-k="-">âˆ’</button>
        <button data-k="^2">xÂ²</button>

        <button data-k="1">1</button>
        <button data-k="2">2</button>
        <button data-k="3">3</button>
        <button data-k="+">+</button>
        <button data-k="%">%</button>

        <button data-k="0" class="span2">0</button>
        <button data-k=".">.</button>
        <button data-k="ANS">ANS</button>
        <button data-k="=" class="eq">=</button>
      </div>
    </div>
  </div>

  <!-- ===== SCRIPTS ===== -->
  <script src="practice.js"></script>
  <script src="tools-panel.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjs@11.11.2/lib/browser/math.js"></script>
  <script src="calculator.js"></script>
</body>
</html>
